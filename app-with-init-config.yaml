apiVersion: v1
kind: Pod
metadata:
  name: app-with-init-config
spec:
  initContainers:
    - name: init-config
      image: busybox:1.35
      command: ['sh', '-c', "mkdir -p /data && echo 'configured' > /data/config.txt"]
      volumeMounts:
        - name: shared-data
          mountPath: /data
  containers:
    - name: app-container
      image: nginx:1.25-alpine
      ports:
        - containerPort: 80
      volumeMounts:
        - name: shared-data
          mountPath: /data
  volumes:
    - name: shared-data
      emptyDir: {}